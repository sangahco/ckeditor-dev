(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var e=["clike","css","javascript"];for(var b=0;b<e.length;++b){a.extendMode(e[b],{blockCommentContinue:" * "})}function c(r){if(r.getOption("disableInput")){return a.Pass}var f=r.listSelections(),m,p=[];for(var l=0;l<f.length;l++){var q=f[l].head,g=r.getTokenAt(q);if(g.type!="comment"){return a.Pass}var o=a.innerMode(r.getMode(),g.state).mode;if(!m){m=o}else{if(m!=o){return a.Pass}}var s=null;if(m.blockCommentStart&&m.blockCommentContinue){var h=g.string.indexOf(m.blockCommentEnd);var n=r.getRange(a.Pos(q.line,0),a.Pos(q.line,g.end)),u;if(h!=-1&&h==g.string.length-m.blockCommentEnd.length&&q.ch>=h){}else{if(g.string.indexOf(m.blockCommentStart)==0){s=n.slice(0,g.start);if(!/^\s*$/.test(s)){s="";for(var k=0;k<g.start;++k){s+=" "}}}else{if((u=n.indexOf(m.blockCommentContinue))!=-1&&u+m.blockCommentContinue.length>g.start&&/^\s*$/.test(n.slice(0,u))){s=n.slice(0,u)}}}if(s!=null){s+=m.blockCommentContinue}}if(s==null&&m.lineComment&&d(r)){var t=r.getLine(q.line),u=t.indexOf(m.lineComment);if(u>-1){s=t.slice(0,u);if(/\S/.test(s)){s=null}else{s+=m.lineComment+t.slice(u+m.lineComment.length).match(/^\s*/)[0]}}}if(s==null){return a.Pass}p[l]="\n"+s}r.operation(function(){for(var j=f.length-1;j>=0;j--){r.replaceRange(p[j],f[j].from(),f[j].to(),"+insert")}})}function d(f){var g=f.getOption("continueComments");if(g&&typeof g=="object"){return g.continueLineComment!==false}return true}a.defineOption("continueComments",null,function(f,j,h){if(h&&h!=a.Init){f.removeKeyMap("continueComment")}if(j){var g="Enter";if(typeof j=="string"){g=j}else{if(typeof j=="object"&&j.key){g=j.key}}var i={name:"continueComment"};i[g]=c;f.addKeyMap(i)}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(f){var e={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"};var o=f.Pos;f.defineOption("autoCloseBrackets",false,function(i,s,r){if(r&&r!=f.Init){i.removeKeyMap(k);i.state.closeBrackets=null}if(s){i.state.closeBrackets=s;i.addKeyMap(k)}});function a(r,i){if(i=="pairs"&&typeof r=="string"){return r}if(typeof r=="object"&&r[i]!=null){return r[i]}return e[i]}var l=e.pairs+"`";var k={Backspace:d,Enter:b};for(var j=0;j<l.length;j++){k["'"+l.charAt(j)+"'"]=q(l.charAt(j))}function q(i){return function(r){return p(r,i)}}function n(i){var s=i.state.closeBrackets;if(!s){return null}var r=i.getModeAt(i.getCursor());return r.closeBrackets||s}function d(r){var t=n(r);if(!t||r.getOption("disableInput")){return f.Pass}var w=a(t,"pairs");var s=r.listSelections();for(var u=0;u<s.length;u++){if(!s[u].empty()){return f.Pass}var v=h(r,s[u].head);if(!v||w.indexOf(v)%2!=0){return f.Pass}}for(var u=s.length-1;u>=0;u--){var x=s[u].head;r.replaceRange("",o(x.line,x.ch-1),o(x.line,x.ch+1))}}function b(r){var t=n(r);var v=t&&a(t,"explode");if(!v||r.getOption("disableInput")){return f.Pass}var s=r.listSelections();for(var u=0;u<s.length;u++){if(!s[u].empty()){return f.Pass}var w=h(r,s[u].head);if(!w||v.indexOf(w)%2!=0){return f.Pass}}r.operation(function(){r.replaceSelection("\n\n",null);r.execCommand("goCharLeft");s=r.listSelections();for(var y=0;y<s.length;y++){var x=s[y].head.line;r.indentLine(x,null,true);r.indentLine(x+1,null,true)}})}function g(r){var i=f.cmpPos(r.anchor,r.head)>0;return{anchor:new o(r.anchor.line,r.anchor.ch+(i?-1:1)),head:new o(r.head.line,r.head.ch+(i?1:-1))}}function p(E,r){var z=n(E);if(!z||E.getOption("disableInput")){return f.Pass}var t=a(z,"pairs");var C=t.indexOf(r);if(C==-1){return f.Pass}var H=a(z,"triples");var D=t.charAt(C+1)==r;var s=E.listSelections();var u=C%2==0;var A,y;for(var w=0;w<s.length;w++){var x=s[w],G=x.head,B;var y=E.getRange(G,o(G.line,G.ch+1));if(u&&!x.empty()){B="surround"}else{if((D||!u)&&y==r){if(H.indexOf(r)>=0&&E.getRange(G,o(G.line,G.ch+3))==r+r+r){B="skipThree"}else{B="skip"}}else{if(D&&G.ch>1&&H.indexOf(r)>=0&&E.getRange(o(G.line,G.ch-2),G)==r+r&&(G.ch<=2||E.getRange(o(G.line,G.ch-3),o(G.line,G.ch-2))!=r)){B="addFour"}else{if(D){if(!f.isWordChar(y)&&m(E,G,r)){B="both"}else{return f.Pass}}else{if(u&&(E.getLine(G.line).length==G.ch||c(y,t)||/\s/.test(y))){B="both"}else{return f.Pass}}}}}if(!A){A=B}else{if(A!=B){return f.Pass}}}var v=C%2?t.charAt(C-1):r;var F=C%2?r:t.charAt(C+1);E.operation(function(){if(A=="skip"){E.execCommand("goCharRight")}else{if(A=="skipThree"){for(var J=0;J<3;J++){E.execCommand("goCharRight")}}else{if(A=="surround"){var I=E.getSelections();for(var J=0;J<I.length;J++){I[J]=v+I[J]+F}E.replaceSelections(I,"around");I=E.listSelections().slice();for(var J=0;J<I.length;J++){I[J]=g(I[J])}E.setSelections(I)}else{if(A=="both"){E.replaceSelection(v+F,null);E.triggerElectric(v+F);E.execCommand("goCharLeft")}else{if(A=="addFour"){E.replaceSelection(v+v+v+v,"before");E.execCommand("goCharRight")}}}}}})}function c(i,r){var s=r.lastIndexOf(i);return s>-1&&s%2==1}function h(i,s){var r=i.getRange(o(s.line,s.ch-1),o(s.line,s.ch+1));return r.length==2?r:null}function m(i,w,u){var r=i.getLine(w.line);var t=i.getTokenAt(w);if(/\bstring2?\b/.test(t.type)){return false}var v=new f.StringStream(r.slice(0,w.ch)+u+r.slice(w.ch),4);v.pos=v.start=t.start;for(;;){var s=i.getMode().token(v,t.state);if(v.pos>=w.ch+1){return/\bstring2?\b/.test(s)}v.start=v.pos}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(b){b.defineOption("autoCloseTags",false,function(i,l,j){if(j!=b.Init&&j){i.removeKeyMap("autoCloseTags")}if(!l){return}var k={name:"autoCloseTags"};if(typeof l!="object"||l.whenClosing){k["'/'"]=function(m){return e(m)}}if(typeof l!="object"||l.whenOpening){k["'>'"]=function(m){return a(m)}}i.addKeyMap(k)});var d=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var c=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function a(x){if(x.getOption("disableInput")){return b.Pass}var k=x.listSelections(),r=[];for(var s=0;s<k.length;s++){if(!k[s].empty()){return b.Pass}var w=k[s].head,y=x.getTokenAt(w);var z=b.innerMode(x.getMode(),y.state),j=z.state;if(z.mode.name!="xml"||!j.tagName){return b.Pass}var l=x.getOption("autoCloseTags"),t=z.mode.configuration=="html";var n=(typeof l=="object"&&l.dontCloseTags)||(t&&d);var v=(typeof l=="object"&&l.indentTags)||(t&&c);var q=j.tagName;if(y.end>w.ch){q=q.slice(0,q.length-y.end+w.ch)}var u=q.toLowerCase();if(!q||y.type=="string"&&(y.end!=w.ch||!/[\"\']/.test(y.string.charAt(y.string.length-1))||y.string.length==1)||y.type=="tag"&&j.type=="closeTag"||y.string.indexOf("/")==(y.string.length-1)||n&&g(n,u)>-1||f(x,q,w,j,true)){return b.Pass}var p=v&&g(v,u)>-1;r[s]={indent:p,text:">"+(p?"\n\n":"")+"</"+q+">",newPos:p?b.Pos(w.line+1,0):b.Pos(w.line,w.ch+1)}}for(var s=k.length-1;s>=0;s--){var o=r[s];x.replaceRange(o.text,k[s].head,k[s].anchor,"+insert");var m=x.listSelections().slice(0);m[s]={head:o.newPos,anchor:o.newPos};x.setSelections(m);if(o.indent){x.indentLine(o.newPos.line,null,true);x.indentLine(o.newPos.line+1,null,true)}}}function h(r,n){var k=r.listSelections(),m=[];var q=n?"/":"</";for(var o=0;o<k.length;o++){if(!k[o].empty()){return b.Pass}var p=k[o].head,s=r.getTokenAt(p);var t=b.innerMode(r.getMode(),s.state),j=t.state;if(n&&(s.type=="string"||s.string.charAt(0)!="<"||s.start!=p.ch-1)){return b.Pass}var l;if(t.mode.name!="xml"){if(r.getMode().name=="htmlmixed"&&t.mode.name=="javascript"){l=q+"script"}else{if(r.getMode().name=="htmlmixed"&&t.mode.name=="css"){l=q+"style"}else{return b.Pass}}}else{if(!j.context||!j.context.tagName||f(r,j.context.tagName,p,j)){return b.Pass}l=q+j.context.tagName}if(r.getLine(p.line).charAt(s.end)!=">"){l+=">"}m[o]=l}r.replaceSelections(m);k=r.listSelections();for(var o=0;o<k.length;o++){if(o==k.length-1||k[o].head.line<k[o+1].head.line){r.indentLine(k[o].head.line)}}}function e(i){if(i.getOption("disableInput")){return b.Pass}return h(i,true)}b.commands.closeTag=function(i){return h(i)};function g(m,j){if(m.indexOf){return m.indexOf(j)}for(var k=0,l=m.length;k<l;++k){if(m[k]==j){return k}}return -1}function f(r,k,q,j,t){if(!b.scanForClosingTag){return false}var l=Math.min(r.lastLine()+1,q.line+500);var s=b.scanForClosingTag(r,q,null,l);if(!s||s.tag!=k){return false}var m=j.context;for(var o=t?1:0;m&&m.tagName==k;m=m.prev){++o}q=s.to;for(var n=1;n<o;n++){var p=b.scanForClosingTag(r,q,null,l);if(!p||p.tag!=k){return false}q=p.to}return true}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(e){var d=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var i=e.Pos;var a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function f(q,m,p,k){var s=q.getLineHandle(m.line),o=m.ch-1;var n=(o>=0&&a[s.text.charAt(o)])||a[s.text.charAt(++o)];if(!n){return null}var l=n.charAt(1)==">"?1:-1;if(p&&(l>0)!=(o==m.ch)){return null}var j=q.getTokenTypeAt(i(m.line,o+1));var r=g(q,i(m.line,o+(l>0?1:0)),l,j||null,k);if(r==null){return null}return{from:i(m.line,o),to:r&&r.pos,match:r&&r.ch==n.charAt(0),forward:l>0}}function g(w,r,n,k,m){var l=(m&&m.maxScanLineLength)||10000;var t=(m&&m.maxScanLines)||1000;var v=[];var x=m&&m.bracketRegex?m.bracketRegex:/[(){}[\]]/;var q=n>0?Math.min(r.line+t,w.lastLine()+1):Math.max(w.firstLine()-1,r.line-t);for(var o=r.line;o!=q;o+=n){var y=w.getLine(o);if(!y){continue}var u=n>0?0:y.length-1,p=n>0?y.length:-1;if(y.length>l){continue}if(o==r.line){u=r.ch-(n<0?1:0)}for(;u!=p;u+=n){var j=y.charAt(u);if(x.test(j)&&(k===undefined||w.getTokenTypeAt(i(o,u+1))==k)){var s=a[j];if((s.charAt(1)==">")==(n>0)){v.push(j)}else{if(!v.length){return{pos:i(o,u),ch:j}}else{v.pop()}}}}}return o-n==(n>0?w.lastLine():w.firstLine())?false:null}function b(s,n,m){var k=s.state.matchBrackets.maxHighlightLineLength||1000;var r=[],l=s.listSelections();for(var o=0;o<l.length;o++){var q=l[o].empty()&&f(s,l[o].head,false,m);if(q&&s.getLine(q.from.line).length<=k){var j=q.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";r.push(s.markText(q.from,i(q.from.line,q.from.ch+1),{className:j}));if(q.to&&s.getLine(q.to.line).length<=k){r.push(s.markText(q.to,i(q.to.line,q.to.ch+1),{className:j}))}}}if(r.length){if(d&&s.state.focused){s.focus()}var p=function(){s.operation(function(){for(var t=0;t<r.length;t++){r[t].clear()}})};if(n){setTimeout(p,800)}else{return p}}}var c=null;function h(j){j.operation(function(){if(c){c();c=null}c=b(j,false,j.state.matchBrackets)})}e.defineOption("matchBrackets",false,function(j,l,k){if(k&&k!=e.Init){j.off("cursorActivity",h)}if(l){j.state.matchBrackets=typeof l=="object"?l:{};j.on("cursorActivity",h)}});e.defineExtension("matchBrackets",function(){b(this,true)});e.defineExtension("findMatchingBracket",function(l,j,k){return f(this,l,j,k)});e.defineExtension("scanForBracket",function(m,k,l,j){return g(this,m,k,l,j)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(c){c.defineOption("matchTags",false,function(e,g,f){if(f&&f!=c.Init){e.off("cursorActivity",b);e.off("viewportChange",d);a(e)}if(g){e.state.matchBothTags=typeof g=="object"&&g.bothTags;e.on("cursorActivity",b);e.on("viewportChange",d);b(e)}});function a(e){if(e.state.tagHit){e.state.tagHit.clear()}if(e.state.tagOther){e.state.tagOther.clear()}e.state.tagHit=e.state.tagOther=null}function b(e){e.state.failedTagMatch=false;e.operation(function(){a(e);if(e.somethingSelected()){return}var j=e.getCursor(),g=e.getViewport();g.from=Math.min(g.from,j.line);g.to=Math.max(j.line+1,g.to);var h=c.findMatchingTag(e,j,g);if(!h){return}if(e.state.matchBothTags){var i=h.at=="open"?h.open:h.close;if(i){e.state.tagHit=e.markText(i.from,i.to,{className:"CodeMirror-matchingtag"})}}var f=h.at=="close"?h.open:h.close;if(f){e.state.tagOther=e.markText(f.from,f.to,{className:"CodeMirror-matchingtag"})}else{e.state.failedTagMatch=true}})}function d(e){if(e.state.failedTagMatch){b(e)}}c.commands.toMatchingTag=function(f){var g=c.findMatchingTag(f,f.getCursor());if(g){var e=g.at=="close"?g.open:g.close;if(e){f.extendSelection(e.to,e.from)}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineOption("showTrailingSpace",false,function(b,d,c){if(c==a.Init){c=false}if(c&&!d){b.removeOverlay("trailingspace")}else{if(!c&&d){b.addOverlay({token:function(g){for(var e=g.string.length,f=e;f&&/\s/.test(g.string.charAt(f-1));--f){}if(f>g.pos){g.pos=f;return null}g.pos=e;return"trailingspace"},name:"trailingspace"})}}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function d(n,m,o,i){if(o&&o.call){var g=o;o=null}else{var g=c(n,o,"rangeFinder")}if(typeof m=="number"){m=b.Pos(m,0)}var h=c(n,o,"minFoldSize");function f(p){var q=g(n,m);if(!q||q.to.line-q.from.line<h){return null}var s=n.findMarksAt(q.from);for(var r=0;r<s.length;++r){if(s[r].__isFold&&i!=="fold"){if(!p){return null}q.cleared=true;s[r].clear()}}return q}var k=f(true);if(c(n,o,"scanUp")){while(!k&&m.line>n.firstLine()){m=b.Pos(m.line-1,0);k=f(false)}}if(!k||k.cleared||i==="unfold"){return}var l=e(n,o);b.on(l,"mousedown",function(p){j.clear();b.e_preventDefault(p)});var j=n.markText(k.from,k.to,{replacedWith:l,clearOnEnter:true,__isFold:true});j.on("clear",function(q,p){b.signal(n,"unfold",n,q,p)});b.signal(n,"fold",n,k.from,k.to)}function e(f,g){var h=c(f,g,"widget");if(typeof h=="string"){var i=document.createTextNode(h);h=document.createElement("span");h.appendChild(i);h.className="CodeMirror-foldmarker"}return h}b.newFoldFunction=function(g,f){return function(h,i){d(h,i,{rangeFinder:g,widget:f})}};b.defineExtension("foldCode",function(h,f,g){d(this,h,f,g)});b.defineExtension("isFolded",function(h){var g=this.findMarksAt(h);for(var f=0;f<g.length;++f){if(g[f].__isFold){return true}}});b.commands.toggleFold=function(f){f.foldCode(f.getCursor())};b.commands.fold=function(f){f.foldCode(f.getCursor(),null,"fold")};b.commands.unfold=function(f){f.foldCode(f.getCursor(),null,"unfold")};b.commands.foldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"fold")}})};b.commands.unfoldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"unfold")}})};b.registerHelper("fold","combine",function(){var f=Array.prototype.slice.call(arguments,0);return function(g,k){for(var h=0;h<f.length;++h){var j=f[h](g,k);if(j){return j}}}});b.registerHelper("fold","auto",function(f,k){var h=f.getHelpers(k,"fold");for(var g=0;g<h.length;g++){var j=h[g](f,k);if(j){return j}}});var a={rangeFinder:b.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:false};b.defineOption("foldOptions",null);function c(f,h,g){if(h&&h[g]!==undefined){return h[g]}var i=f.options.foldOptions;if(i&&i[g]!==undefined){return i[g]}return a[g]}b.defineExtension("foldOption",function(g,f){return c(this,g,f)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("./foldcode"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","./foldcode"],a)}else{a(CodeMirror)}}})(function(d){d.defineOption("foldGutter",false,function(m,o,n){if(n&&n!=d.Init){m.clearGutter(m.state.foldGutter.options.gutter);m.state.foldGutter=null;m.off("gutterClick",k);m.off("change",g);m.off("viewportChange",l);m.off("fold",e);m.off("unfold",e);m.off("swapDoc",b)}if(o){m.state.foldGutter=new j(i(o));b(m);m.on("gutterClick",k);m.on("change",g);m.on("viewportChange",l);m.on("fold",e);m.on("unfold",e);m.on("swapDoc",b)}});var h=d.Pos;function j(m){this.options=m;this.from=this.to=0}function i(m){if(m===true){m={}}if(m.gutter==null){m.gutter="CodeMirror-foldgutter"}if(m.indicatorOpen==null){m.indicatorOpen="CodeMirror-foldgutter-open"}if(m.indicatorFolded==null){m.indicatorFolded="CodeMirror-foldgutter-folded"}return m}function c(m,n){var p=m.findMarksAt(h(n));for(var o=0;o<p.length;++o){if(p[o].__isFold&&p[o].find().from.line==n){return p[o]}}}function f(m){if(typeof m=="string"){var n=document.createElement("div");n.className=m+" CodeMirror-guttermarker-subtle";return n}else{return m.cloneNode(true)}}function a(m,s,r){var o=m.state.foldGutter.options,q=s;var p=m.foldOption(o,"minFoldSize");var n=m.foldOption(o,"rangeFinder");m.eachLine(s,r,function(t){var w=null;if(c(m,q)){w=f(o.indicatorFolded)}else{var v=h(q,0);var u=n&&n(m,v);if(u&&u.to.line-u.from.line>=p){w=f(o.indicatorOpen)}}m.setGutterMarker(t,o.gutter,w);++q})}function b(m){var n=m.getViewport(),o=m.state.foldGutter;if(!o){return}m.operation(function(){a(m,n.from,n.to)});o.from=n.from;o.to=n.to}function k(m,n,q){var p=m.state.foldGutter;if(!p){return}var o=p.options;if(q!=o.gutter){return}var r=c(m,n);if(r){r.clear()}else{m.foldCode(h(n,0),o.rangeFinder)}}function g(m){var o=m.state.foldGutter;if(!o){return}var n=o.options;o.from=o.to=0;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){b(m)},n.foldOnChangeTimeSpan||600)}function l(m){var o=m.state.foldGutter;if(!o){return}var n=o.options;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){var p=m.getViewport();if(o.from==o.to||p.from-o.to>20||o.from-p.to>20){b(m)}else{m.operation(function(){if(p.from<o.from){a(m,p.from,o.from);o.from=p.from}if(p.to>o.to){a(m,o.to,p.to);o.to=p.to}})}},n.updateViewportTimeSpan||400)}function e(m,p){var o=m.state.foldGutter;if(!o){return}var n=p.line;if(n>=o.from&&n<o.to){a(m,n,n+1)}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","brace",function(m,h){var o=h.line,g=m.getLine(o);var n,t;function d(u){for(var i=h.ch,v=0;;){var w=i<=0?-1:g.lastIndexOf(u,i-1);if(w==-1){if(v==1){break}v=1;i=g.length;continue}if(v==1&&w<h.ch){break}t=m.getTokenTypeAt(a.Pos(o,w+1));if(!/^(comment|string)/.test(t)){return w+1}i=w-1}}var j="{",e="}",n=d("{");if(n==null){j="[",e="]";n=d("[")}if(n==null){return}var l=1,c=m.lastLine(),f,q;outer:for(var s=o;s<=c;++s){var p=m.getLine(s),k=s==o?n:0;for(;;){var b=p.indexOf(j,k),r=p.indexOf(e,k);if(b<0){b=p.length}if(r<0){r=p.length}k=Math.min(b,r);if(k==p.length){break}if(m.getTokenTypeAt(a.Pos(s,k+1))==t){if(k==b){++l}else{if(!--l){f=s;q=k;break outer}}}++k}}if(f==null||o==f&&q==n){return}return{from:a.Pos(o,n),to:a.Pos(f,q)}});a.registerHelper("fold","import",function(b,h){function g(k){if(k<b.firstLine()||k>b.lastLine()){return null}var o=b.getTokenAt(a.Pos(k,1));if(!/\S/.test(o.string)){o=b.getTokenAt(a.Pos(k,o.end+1))}if(o.type!="keyword"||o.string!="import"){return null}for(var l=k,m=Math.min(b.lastLine(),k+10);l<=m;++l){var n=b.getLine(l),j=n.indexOf(";");if(j!=-1){return{startCh:o.end,end:a.Pos(l,j)}}}}var h=h.line,d=g(h),f;if(!d||g(h-1)||((f=g(h-2))&&f.end.line==h-1)){return null}for(var c=d.end;;){var e=g(c.line+1);if(e==null){break}c=e.end}return{from:b.clipPos(a.Pos(h,d.startCh+1)),to:c}});a.registerHelper("fold","include",function(b,g){function f(h){if(h<b.firstLine()||h>b.lastLine()){return null}var i=b.getTokenAt(a.Pos(h,1));if(!/\S/.test(i.string)){i=b.getTokenAt(a.Pos(h,i.end+1))}if(i.type=="meta"&&i.string.slice(0,8)=="#include"){return i.start+8}}var g=g.line,d=f(g);if(d==null||f(g-1)!=null){return null}for(var c=g;;){var e=f(c+1);if(e==null){break}++c}return{from:a.Pos(g,d+1),to:b.clipPos(a.Pos(c))}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerGlobalHelper("fold","comment",function(b){return b.blockCommentStart&&b.blockCommentEnd},function(l,h){var q=l.getModeAt(h),j=q.blockCommentStart,e=q.blockCommentEnd;if(!j||!e){return}var n=h.line,g=l.getLine(n);var m;for(var r=h.ch,c=0;;){var o=r<=0?-1:g.lastIndexOf(j,r-1);if(o==-1){if(c==1){return}c=1;r=g.length;continue}if(c==1&&o<h.ch){return}if(/comment/.test(l.getTokenTypeAt(a.Pos(n,o+1)))&&(g.slice(o-e.length,o)==e||!/comment/.test(l.getTokenTypeAt(a.Pos(n,o))))){m=o+j.length;break}r=o-1}var v=1,d=l.lastLine(),f,s;outer:for(var u=n;u<=d;++u){var p=l.getLine(u),k=u==n?m:0;for(;;){var b=p.indexOf(j,k),t=p.indexOf(e,k);if(b<0){b=p.length}if(t<0){t=p.length}k=Math.min(b,t);if(k==p.length){break}if(k==b){++v}else{if(!--v){f=u;s=k;break outer}}++k}}if(f==null||n==f&&s==m){return}return{from:a.Pos(n,m),to:a.Pos(f,s)}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","indent",function(l,c){var g=l.getOption("tabSize"),k=l.getLine(c.line);if(!/\S/.test(k)){return}var j=function(i){return a.countColumn(i,null,g)};var f=j(k);var h=null;for(var e=c.line+1,d=l.lastLine();e<=d;++e){var b=l.getLine(e);var m=j(b);if(m>f){h=e}else{if(!/\S/.test(b)){}else{break}}}if(h){return{from:a.Pos(c.line,k.length),to:a.Pos(h,l.getLine(h).length)}}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(i){var m=i.Pos;function l(r,q){return r.line-q.line||r.ch-q.ch}var j="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var o=j+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var d=new RegExp("<(/?)(["+j+"]["+o+"]*)","g");function b(q,r,t,s){this.line=r;this.ch=t;this.cm=q;this.text=q.getLine(r);this.min=s?s.from:q.firstLine();this.max=s?s.to-1:q.lastLine()}function h(q,s){var r=q.cm.getTokenTypeAt(m(q.line,s));return r&&/\btag\b/.test(r)}function a(q){if(q.line>=q.max){return}q.ch=0;q.text=q.cm.getLine(++q.line);return true}function n(q){if(q.line<=q.min){return}q.text=q.cm.getLine(--q.line);q.ch=q.text.length;return true}function g(s){for(;;){var r=s.text.indexOf(">",s.ch);if(r==-1){if(a(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r+1;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function k(r){for(;;){var q=r.ch?r.text.lastIndexOf("<",r.ch-1):-1;if(q==-1){if(n(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q;continue}d.lastIndex=q;r.ch=q;var s=d.exec(r.text);if(s&&s.index==q){return s}}}function p(q){for(;;){d.lastIndex=q.ch;var r=d.exec(q.text);if(!r){if(a(q)){continue}else{return}}if(!h(q,r.index+1)){q.ch=r.index+1;continue}q.ch=r.index+r[0].length;return r}}function e(s){for(;;){var r=s.ch?s.text.lastIndexOf(">",s.ch-1):-1;if(r==-1){if(n(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function f(t,r){var q=[];for(;;){var v=p(t),s,x=t.line,w=t.ch-(v?v[0].length:0);if(!v||!(s=g(t))){return}if(s=="selfClose"){continue}if(v[1]){for(var u=q.length-1;u>=0;--u){if(q[u]==v[2]){q.length=u;break}}if(u<0&&(!r||r==v[2])){return{tag:v[2],from:m(x,w),to:m(t.line,t.ch)}}}else{q.push(v[2])}}}function c(s,r){var q=[];for(;;){var w=e(s);if(!w){return}if(w=="selfClose"){k(s);continue}var v=s.line,u=s.ch;var x=k(s);if(!x){return}if(x[1]){q.push(x[2])}else{for(var t=q.length-1;t>=0;--t){if(q[t]==x[2]){q.length=t;break}}if(t<0&&(!r||r==x[2])){return{tag:x[2],from:m(s.line,s.ch),to:m(v,u)}}}}}i.registerHelper("fold","xml",function(q,v){var s=new b(q,v.line,0);for(;;){var t=p(s),r;if(!t||s.line!=v.line||!(r=g(s))){return}if(!t[1]&&r!="selfClose"){var v=m(s.line,s.ch);var u=f(s,t[2]);return u&&{from:v,to:u.from}}}});i.findMatchingTag=function(q,x,t){var s=new b(q,x.line,x.ch,t);if(s.text.indexOf(">")==-1&&s.text.indexOf("<")==-1){return}var r=g(s),w=r&&m(s.line,s.ch);var v=r&&k(s);if(!r||!v||l(s,x)>0){return}var u={from:m(s.line,s.ch),to:w,tag:v[2]};if(r=="selfClose"){return{open:u,close:null,at:"open"}}if(v[1]){return{open:c(s,v[2]),close:u,at:"close"}}else{s=new b(q,w.line,w.ch,t);return{open:u,close:f(s,v[2]),at:"open"}}};i.findEnclosingTag=function(q,w,s){var r=new b(q,w.line,w.ch,s);for(;;){var u=c(r);if(!u){break}var t=new b(q,w.line,w.ch,s);var v=f(t,u.tag);if(v){return{open:u,close:v}}}};i.scanForClosingTag=function(q,u,t,s){var r=new b(q,u.line,u.ch,s?{from:0,to:s}:null);return f(r,t)}});(function(){CodeMirror.defineExtension("autoFormatAll",function(h,j){var k=this;var o=k.getMode(),n=k.getRange(h,j).split("\n");var c=CodeMirror.copyState(o,k.getTokenAt(h).state);var g=k.getOption("tabSize");var e="",q=0,a=h.ch==0;function d(){e+="\n";a=true;++q}for(var f=0;f<n.length;++f){var m=new CodeMirror.StringStream(n[f],g);while(!m.eol()){var p=CodeMirror.innerMode(o,c);var b=o.token(m,c),l=m.current();m.start=m.pos;if(!a||/\S/.test(l)){e+=l;a=false}if(!a&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(b,l,m.string.slice(m.pos)||n[f+1]||"",p.state)){d()}}if(!m.pos&&o.blankLine){o.blankLine(c)}if(!a&&f<n.length-1){d()}}k.operation(function(){k.replaceRange(e,h,j);for(var r=h.line+1,i=h.line+q;r<=i;++r){k.indentLine(r,"smart")}k.setCursor({line:0,ch:0})})})})();(function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(c,d){return/^[;{}]$/.test(d)}});CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(h){var g=0;var f=this.jsonMode?function(i){return i.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(i){return i.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")};var e=a(h),d="";if(e!=null){for(var c=0;c<e.length;c++){if(e[c].start>g){d+=f(h.substring(g,e[c].start));g=e[c].start}if(e[c].start<=g&&e[c].end>=g){d+=h.substring(g,e[c].end);g=e[c].end}}if(g<h.length){d+=f(h.substr(g))}}else{d=f(h)}return d.replace(/^\n*|\n*$/,"")}});function a(h){var g=[/for\s*?\((.*?)\)/g,/&#?[a-z0-9]+;[\s\S]/g,/\"(.*?)((\")|$)/g,/\/\*(.*?)(\*\/|$)/g,/^\/\/.*/g];var e=[];for(var d=0;d<g.length;d++){var f=0;while(f<h.length){var c=h.substr(f).match(g[d]);if(c!=null){e.push({start:f+c.index,end:f+c.index+c[0].length});f+=c.index+Math.max(1,c[0].length)}else{break}}}e.sort(function(j,i){return j.start-i.start});return e}var b=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",noBreak:false,noBreakEmpty:null,tagType:"",tagName:"",isXML:false,newlineAfterToken:function(g,e,f,c){var m="label|li|option|textarea|title";var l="a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u";var j=m+"|"+l;var h=false,d=null,k="";this.isXML=this.configuration=="xml"?true:false;if(g=="comment"||/<!--/.test(f)){return false}if(g=="tag"){if(e.indexOf("<")==0&&!e.indexOf("</")==0){this.tagType="open";d=e.match(/^<\s*?([\w]+?)$/i);this.tagName=d!=null?d[1]:"";var k=this.tagName.toLowerCase();if(("|"+j+"|").indexOf("|"+k+"|")!=-1){this.noBreak=true}}if(e.indexOf(">")==0&&this.tagType=="open"){this.tagType="";var i=this.isXML?"[^<]*?":"";if(RegExp("^"+i+"</s*?"+this.tagName+"s*?>","i").test(f)){this.noBreak=false;if(!this.isXML){this.tagName=""}return false}h=this.noBreak;this.noBreak=false;return h?false:true}if(e.indexOf("</")==0){this.tagType="close";d=e.match(/^<\/\s*?([\w]+?)$/i);if(d!=null){k=d[1].toLowerCase()}if(("|"+l+"|").indexOf("|"+k+"|")!=-1){this.noBreak=true}}if(e.indexOf(">")==0&&this.tagType=="close"){this.tagType="";if(f.indexOf("<")==0){d=f.match(/^<\/?\s*?([\w]+?)(\s|>)/i);k=d!=null?d[1].toLowerCase():"";if(("|"+j+"|").indexOf("|"+k+"|")==-1){this.noBreak=false;return true}}h=this.noBreak;this.noBreak=false;return h?false:true}}if(f.indexOf("<")==0){this.noBreak=false;if(this.isXML&&this.tagName!=""){this.tagName="";return false}d=f.match(/^<\/?\s*?([\w]+?)(\s|>)/i);k=d!=null?d[1].toLowerCase():"";if(("|"+j+"|").indexOf("|"+k+"|")!=-1){return false}else{return true}}return false}});CodeMirror.defineExtension("commentRange",function(d,g,f){var c=this,e=CodeMirror.innerMode(c.getMode(),c.getTokenAt(g).state).mode;c.operation(function(){if(d){c.replaceRange(e.commentEnd,f);c.replaceRange(e.commentStart,g);if(g.line==f.line&&g.ch==f.ch){c.setCursor(g.line,g.ch+e.commentStart.length)}}else{var j=c.getRange(g,f);var i=j.indexOf(e.commentStart);var h=j.lastIndexOf(e.commentEnd);if(i>-1&&h>-1&&h>i){j=j.substr(0,i)+j.substring(i+e.commentStart.length,h)+j.substr(h+e.commentEnd.length)}c.replaceRange(j,g,f)}})});CodeMirror.defineExtension("autoIndentRange",function(e,d){var c=this;this.operation(function(){for(var f=e.line;f<=d.line;f++){c.indentLine(f,"smart")}})});CodeMirror.defineExtension("autoFormatRange",function(k,l){var m=this;var q=m.getMode(),p=m.getRange(k,l).split("\n");var e=CodeMirror.copyState(q,m.getTokenAt(k).state);var j=m.getOption("tabSize");var g="",s=0,c=k.ch==0;function f(){g+="\n";c=true;++s}for(var h=0;h<p.length;++h){var o=new CodeMirror.StringStream(p[h],j);while(!o.eol()){var r=CodeMirror.innerMode(q,e);var d=q.token(o,e),n=o.current();o.start=o.pos;if(!c||/\S/.test(n)){g+=n;c=false}if(!c&&r.mode.newlineAfterToken&&r.mode.newlineAfterToken(d,n,o.string.slice(o.pos)||p[h+1]||"",r.state)){f()}}if(!o.pos&&q.blankLine){q.blankLine(e)}if(!c&&h<p.length-1){f()}}m.operation(function(){m.replaceRange(g,k,l);for(var t=k.line+1,i=k.line+s;t<=i;++t){m.indentLine(t,"smart")}m.setSelection(k,m.getCursor(false))})})})();(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(c){var g="CodeMirror-activeline";var f="CodeMirror-activeline-background";c.defineOption("styleActiveLine",false,function(h,k,i){var j=i&&i!=c.Init;if(k&&!j){h.state.activeLines=[];e(h,h.listSelections());h.on("beforeSelectionChange",b)}else{if(!k&&j){h.off("beforeSelectionChange",b);d(h);delete h.state.activeLines}}});function d(h){for(var j=0;j<h.state.activeLines.length;j++){h.removeLineClass(h.state.activeLines[j],"wrap",g);h.removeLineClass(h.state.activeLines[j],"background",f)}}function a(j,h){if(j.length!=h.length){return false}for(var k=0;k<j.length;k++){if(j[k]!=h[k]){return false}}return true}function e(h,k){var n=[];for(var m=0;m<k.length;m++){var l=k[m];if(!l.empty()){continue}var j=h.getLineHandleVisualStart(l.head.line);if(n[n.length-1]!=j){n.push(j)}}if(a(h.state.activeLines,n)){return}h.operation(function(){d(h);for(var o=0;o<n.length;o++){h.addLineClass(n[o],"wrap",g);h.addLineClass(n[o],"background",f)}h.state.activeLines=n})}function b(h,i){e(h,i.ranges)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var i=2;var b="matchhighlight";var c=100;var k=false;function h(l){if(typeof l=="object"){this.minChars=l.minChars;this.style=l.style;this.showToken=l.showToken;this.delay=l.delay;this.wordsOnly=l.wordsOnly}if(this.style==null){this.style=b}if(this.minChars==null){this.minChars=i}if(this.delay==null){this.delay=c}if(this.wordsOnly==null){this.wordsOnly=k}this.overlay=this.timeout=null}a.defineOption("highlightSelectionMatches",false,function(l,o,m){if(m&&m!=a.Init){var n=l.state.matchHighlighter.overlay;if(n){l.removeOverlay(n)}clearTimeout(l.state.matchHighlighter.timeout);l.state.matchHighlighter=null;l.off("cursorActivity",g)}if(o){l.state.matchHighlighter=new h(o);e(l);l.on("cursorActivity",g)}});function g(l){var m=l.state.matchHighlighter;clearTimeout(m.timeout);m.timeout=setTimeout(function(){e(l)},m.delay)}function e(l){l.operation(function(){var m=l.state.matchHighlighter;if(m.overlay){l.removeOverlay(m.overlay);m.overlay=null}if(!l.somethingSelected()&&m.showToken){var t=m.showToken===true?/[\w$]/:m.showToken;var s=l.getCursor(),u=l.getLine(s.line),n=s.ch,o=n;while(n&&t.test(u.charAt(n-1))){--n}while(o<u.length&&t.test(u.charAt(o))){++o}if(n<o){l.addOverlay(m.overlay=d(u.slice(n,o),t,m.style))}return}var q=l.getCursor("from"),r=l.getCursor("to");if(q.line!=r.line){return}if(m.wordsOnly&&!f(l,q,r)){return}var p=l.getRange(q,r).replace(/^\s+|\s+$/g,"");if(p.length>=m.minChars){l.addOverlay(m.overlay=d(p,false,m.style))}})}function f(l,q,p){var n=l.getRange(q,p);if(n.match(/^\w+$/)!==null){if(q.ch>0){var o={line:q.line,ch:q.ch-1};var m=l.getRange(o,q);if(m.match(/\W/)===null){return false}}if(p.ch<l.getLine(q.line).length){var o={line:p.line,ch:p.ch+1};var m=l.getRange(p,o);if(m.match(/\W/)===null){return false}}return true}else{return false}}function j(m,l){return(!m.start||!l.test(m.string.charAt(m.start-1)))&&(m.pos==m.string.length||!l.test(m.string.charAt(m.pos)))}function d(n,m,l){return{token:function(o){if(o.match(n)&&(!m||j(o,m))){return l}o.next();o.skipTo(n.charAt(0))||o.skipToEnd()}}}});