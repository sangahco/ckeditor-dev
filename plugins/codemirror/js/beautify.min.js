(function(){var g={};(function(p){var r=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;var u="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc";var t="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f";var o=new RegExp("["+u+"]");var m=new RegExp("["+u+t+"]");var n=p.newline=/[\n\r\u2028\u2029]/;var s=p.lineBreak=/\r\n|[\n\r\u2028\u2029]/g;var q=p.isIdentifierStart=function(w){if(w<65){return w===36}if(w<91){return true}if(w<97){return w===95}if(w<123){return true}return w>=170&&o.test(String.fromCharCode(w))};var v=p.isIdentifierChar=function(w){if(w<48){return w===36}if(w<58){return true}if(w<65){return false}if(w<91){return true}if(w<97){return w===95}if(w<123){return true}return w>=170&&m.test(String.fromCharCode(w))}})(g);function i(o,m){for(var n=0;n<m.length;n+=1){if(m[n]===o){return true}}return false}function d(m){return m.replace(/^\s+|\s+$/g,"")}function l(m){return m.replace(/^\s+/g,"")}function e(m){return m.replace(/\s+$/g,"")}function c(n,m){var o=new h(n,m);return o.beautify()}var f={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function h(o,G){var J;var R=[],m;var O;var s;var Y,E,aj;var x,H,p;var V;var n,y;var al="";n={TK_START_EXPR:ah,TK_END_EXPR:N,TK_START_BLOCK:W,TK_END_BLOCK:X,TK_WORD:A,TK_RESERVED:A,TK_SEMICOLON:M,TK_STRING:z,TK_EQUALS:S,TK_OPERATOR:ab,TK_COMMA:ad,TK_BLOCK_COMMENT:ac,TK_COMMENT:t,TK_DOT:ae,TK_UNKNOWN:Z,TK_EOF:af};function r(ao,ap){var am=0;if(ao){am=ao.indentation_level;if(!J.just_added_newline()&&ao.line_indent_level>am){am=ao.line_indent_level}}var an={mode:ap,parent:ao,last_text:ao?ao.last_text:"",last_word:ao?ao.last_word:"",declaration_statement:false,declaration_assignment:false,multiline_frame:false,if_block:false,else_block:false,do_block:false,do_while:false,in_case_statement:false,in_case:false,case_body:false,indentation_level:am,line_indent_level:ao?ao.line_indent_level:am,start_line_index:J.get_line_number(),ternary_depth:0};return an}G=G?G:{};y={};if(G.braces_on_own_line!==undefined){y.brace_style=G.braces_on_own_line?"expand":"collapse"}y.brace_style=G.brace_style?G.brace_style:(y.brace_style?y.brace_style:"collapse");if(y.brace_style==="expand-strict"){y.brace_style="expand"}y.indent_size=G.indent_size?parseInt(G.indent_size,10):4;y.indent_char=G.indent_char?G.indent_char:" ";y.eol=G.eol?G.eol:"\n";y.preserve_newlines=(G.preserve_newlines===undefined)?true:G.preserve_newlines;y.break_chained_methods=(G.break_chained_methods===undefined)?false:G.break_chained_methods;y.max_preserve_newlines=(G.max_preserve_newlines===undefined)?0:parseInt(G.max_preserve_newlines,10);y.space_in_paren=(G.space_in_paren===undefined)?false:G.space_in_paren;y.space_in_empty_paren=(G.space_in_empty_paren===undefined)?false:G.space_in_empty_paren;y.jslint_happy=(G.jslint_happy===undefined)?false:G.jslint_happy;y.space_after_anon_function=(G.space_after_anon_function===undefined)?false:G.space_after_anon_function;y.keep_array_indentation=(G.keep_array_indentation===undefined)?false:G.keep_array_indentation;y.space_before_conditional=(G.space_before_conditional===undefined)?true:G.space_before_conditional;y.unescape_strings=(G.unescape_strings===undefined)?false:G.unescape_strings;y.wrap_line_length=(G.wrap_line_length===undefined)?0:parseInt(G.wrap_line_length,10);y.e4x=(G.e4x===undefined)?false:G.e4x;y.end_with_newline=(G.end_with_newline===undefined)?false:G.end_with_newline;y.comma_first=(G.comma_first===undefined)?false:G.comma_first;y.test_output_raw=(G.test_output_raw===undefined)?false:G.test_output_raw;if(y.jslint_happy){y.space_after_anon_function=true}if(G.indent_with_tabs){y.indent_char="\t";y.indent_size=1}y.eol=y.eol.replace(/\\r/,"\r").replace(/\\n/,"\n");aj="";while(y.indent_size>0){aj+=y.indent_char;y.indent_size-=1}var B=0;if(o&&o.length){while((o.charAt(B)===" "||o.charAt(B)==="\t")){al+=o.charAt(B);B+=1}o=o.substring(B)}Y="TK_START_BLOCK";E="";J=new j(aj,al);J.raw=y.test_output_raw;p=[];v(f.BlockStatement);this.beautify=function(){var am,ao;O=new k(o,y,aj);R=O.tokenize();m=0;while(am=D()){for(var an=0;an<am.comments_before.length;an++){ag(am.comments_before[an])}ag(am);E=x.last_text;Y=am.type;x.last_text=am.text;m+=1}ao=J.get_code();if(y.end_with_newline){ao+="\n"}if(y.eol!="\n"){ao=ao.replace(/[\n]/g,y.eol)}return ao};function ag(am){var ap=am.newlines;var an=y.keep_array_indentation&&U(x.mode);if(an){for(ao=0;ao<ap;ao+=1){I(ao>0)}}else{if(y.max_preserve_newlines&&ap>y.max_preserve_newlines){ap=y.max_preserve_newlines}if(y.preserve_newlines){if(am.newlines>1){I();for(var ao=1;ao<ap;ao+=1){I(true)}}}}s=am;n[s.type]()}function ai(ao){ao=ao.replace(/\x0d/g,"");var an=[],am=ao.indexOf("\n");while(am!==-1){an.push(ao.substring(0,am));ao=ao.substring(am+1);am=ao.indexOf("\n")}if(ao.length){an.push(ao)}return an}function u(an){an=(an===undefined)?false:an;if(J.just_added_newline()){return}if((y.preserve_newlines&&s.wanted_newline)||an){I(false,true)}else{if(y.wrap_line_length){var am=J.current_line.get_character_count()+s.text.length+(J.space_before_token?1:0);if(am>=y.wrap_line_length){I(false,true)}}}}function I(am,an){if(!an){if(x.last_text!==";"&&x.last_text!==","&&x.last_text!=="="&&Y!=="TK_OPERATOR"){while(x.mode===f.Statement&&!x.if_block&&!x.do_block){q()}}}if(J.add_new_line(am)){x.multiline_frame=true}}function F(){if(J.just_added_newline()){if(y.keep_array_indentation&&U(x.mode)&&s.wanted_newline){J.current_line.push(s.whitespace_before);J.space_before_token=false}else{if(J.set_indent(x.indentation_level)){x.line_indent_level=x.indentation_level}}}}function P(am){if(J.raw){J.add_raw_token(s);return}if(y.comma_first&&Y==="TK_COMMA"&&J.just_added_newline()){if(J.previous_line.last()===","){J.previous_line.pop();F();J.add_token(",");J.space_before_token=true}}am=am||s.text;F();J.add_token(am)}function w(){x.indentation_level+=1}function C(){if(x.indentation_level>0&&((!x.parent)||x.indentation_level>x.parent.indentation_level)){x.indentation_level-=1}}function v(am){if(x){p.push(x);H=x}else{H=r(null,am)}x=r(H,am)}function U(am){return am===f.ArrayLiteral}function L(am){return i(am,[f.Expression,f.ForInitializer,f.Conditional])}function q(){if(p.length>0){H=x;x=p.pop();if(H.mode===f.Statement){J.remove_redundant_indentation(H)}}}function Q(){return x.parent.mode===f.ObjectLiteral&&x.mode===f.Statement&&((x.last_text===":"&&x.ternary_depth===0)||(Y==="TK_RESERVED"&&i(x.last_text,["get","set"])))}function K(){if((Y==="TK_RESERVED"&&i(x.last_text,["var","let","const"])&&s.type==="TK_WORD")||(Y==="TK_RESERVED"&&x.last_text==="do")||(Y==="TK_RESERVED"&&x.last_text==="return"&&!s.wanted_newline)||(Y==="TK_RESERVED"&&x.last_text==="else"&&!(s.type==="TK_RESERVED"&&s.text==="if"))||(Y==="TK_END_EXPR"&&(H.mode===f.ForInitializer||H.mode===f.Conditional))||(Y==="TK_WORD"&&x.mode===f.BlockStatement&&!x.in_case&&!(s.text==="--"||s.text==="++")&&E!=="function"&&s.type!=="TK_WORD"&&s.type!=="TK_RESERVED")||(x.mode===f.ObjectLiteral&&((x.last_text===":"&&x.ternary_depth===0)||(Y==="TK_RESERVED"&&i(x.last_text,["get","set"]))))){v(f.Statement);w();if(Y==="TK_RESERVED"&&i(x.last_text,["var","let","const"])&&s.type==="TK_WORD"){x.declaration_statement=true}if(!Q()){u(s.type==="TK_RESERVED"&&i(s.text,["do","for","if","while"]))}return true}return false}function ak(an,ap){for(var ao=0;ao<an.length;ao++){var am=d(an[ao]);if(am.charAt(0)!==ap){return false}}return true}function aa(ap,an){var aq=0,am=ap.length,ao;for(;aq<am;aq++){ao=ap[aq];if(ao&&ao.indexOf(an)!==0){return false}}return true}function T(am){return i(am,["case","return","do","if","throw","else"])}function D(an){var am=m+(an||0);return(am<0||am>=R.length)?null:R[am]}function ah(){if(K()){}var am=f.Expression;if(s.text==="["){if(Y==="TK_WORD"||x.last_text===")"){if(Y==="TK_RESERVED"&&i(x.last_text,O.line_starters)){J.space_before_token=true}v(am);P();w();if(y.space_in_paren){J.space_before_token=true}return}am=f.ArrayLiteral;if(U(x.mode)){if(x.last_text==="["||(x.last_text===","&&(E==="]"||E==="}"))){if(!y.keep_array_indentation){I()}}}}else{if(Y==="TK_RESERVED"&&x.last_text==="for"){am=f.ForInitializer}else{if(Y==="TK_RESERVED"&&i(x.last_text,["if","while"])){am=f.Conditional}else{}}}if(x.last_text===";"||Y==="TK_START_BLOCK"){I()}else{if(Y==="TK_END_EXPR"||Y==="TK_START_EXPR"||Y==="TK_END_BLOCK"||x.last_text==="."){u(s.wanted_newline)}else{if(!(Y==="TK_RESERVED"&&s.text==="(")&&Y!=="TK_WORD"&&Y!=="TK_OPERATOR"){J.space_before_token=true}else{if((Y==="TK_RESERVED"&&(x.last_word==="function"||x.last_word==="typeof"))||(x.last_text==="*"&&E==="function")){if(y.space_after_anon_function){J.space_before_token=true}}else{if(Y==="TK_RESERVED"&&(i(x.last_text,O.line_starters)||x.last_text==="catch")){if(y.space_before_conditional){J.space_before_token=true}}}}}}if(s.text==="("&&Y==="TK_RESERVED"&&x.last_word==="await"){J.space_before_token=true}if(s.text==="("){if(Y==="TK_EQUALS"||Y==="TK_OPERATOR"){if(!Q()){u()}}}v(am);P();if(y.space_in_paren){J.space_before_token=true}w()}function N(){while(x.mode===f.Statement){q()}if(x.multiline_frame){u(s.text==="]"&&U(x.mode)&&!y.keep_array_indentation)}if(y.space_in_paren){if(Y==="TK_START_EXPR"&&!y.space_in_empty_paren){J.trim();J.space_before_token=false}else{J.space_before_token=true}}if(s.text==="]"&&y.keep_array_indentation){P();q()}else{q();P()}J.remove_redundant_indentation(H);if(x.do_while&&H.mode===f.Conditional){H.mode=f.Expression;x.do_block=false;x.do_while=false}}function W(){var am=D(1);var ao=D(2);if(ao&&((ao.text===":"&&i(am.type,["TK_STRING","TK_WORD","TK_RESERVED"]))||(i(am.text,["get","set"])&&i(ao.type,["TK_WORD","TK_RESERVED"])))){if(!i(E,["class","interface"])){v(f.ObjectLiteral)}else{v(f.BlockStatement)}}else{v(f.BlockStatement)}var ap=!am.comments_before.length&&am.text==="}";var an=ap&&x.last_word==="function"&&Y==="TK_END_EXPR";if(y.brace_style==="expand"||(y.brace_style==="none"&&s.wanted_newline)){if(Y!=="TK_OPERATOR"&&(an||Y==="TK_EQUALS"||(Y==="TK_RESERVED"&&T(x.last_text)&&x.last_text!=="else"))){J.space_before_token=true}else{I(false,true)}}else{if(Y!=="TK_OPERATOR"&&Y!=="TK_START_EXPR"){if(Y==="TK_START_BLOCK"){I()}else{J.space_before_token=true}}else{if(U(H.mode)&&x.last_text===","){if(E==="}"){J.space_before_token=true}else{I()}}}}P();w()}function X(){while(x.mode===f.Statement){q()}var am=Y==="TK_START_BLOCK";if(y.brace_style==="expand"){if(!am){I()}}else{if(!am){if(U(x.mode)&&y.keep_array_indentation){y.keep_array_indentation=false;I();y.keep_array_indentation=true}else{I()}}}q();P()}function A(){if(s.type==="TK_RESERVED"&&x.mode!==f.ObjectLiteral&&i(s.text,["set","get"])){s.type="TK_WORD"}if(s.type==="TK_RESERVED"&&x.mode===f.ObjectLiteral){var an=D(1);if(an.text==":"){s.type="TK_WORD"}}if(K()){}else{if(s.wanted_newline&&!L(x.mode)&&(Y!=="TK_OPERATOR"||(x.last_text==="--"||x.last_text==="++"))&&Y!=="TK_EQUALS"&&(y.preserve_newlines||!(Y==="TK_RESERVED"&&i(x.last_text,["var","let","const","set","get"])))){I()}}if(x.do_block&&!x.do_while){if(s.type==="TK_RESERVED"&&s.text==="while"){J.space_before_token=true;P();J.space_before_token=true;x.do_while=true;return}else{I();x.do_block=false}}if(x.if_block){if(!x.else_block&&(s.type==="TK_RESERVED"&&s.text==="else")){x.else_block=true}else{while(x.mode===f.Statement){q()}x.if_block=false;x.else_block=false}}if(s.type==="TK_RESERVED"&&(s.text==="case"||(s.text==="default"&&x.in_case_statement))){I();if(x.case_body||y.jslint_happy){C();x.case_body=false}P();x.in_case=true;x.in_case_statement=true;return}if(s.type==="TK_RESERVED"&&s.text==="function"){if(i(x.last_text,["}",";"])||(J.just_added_newline()&&!i(x.last_text,["[","{",":","=",","]))){if(!J.just_added_blankline()&&!s.comments_before.length){I();I(true)}}if(Y==="TK_RESERVED"||Y==="TK_WORD"){if(Y==="TK_RESERVED"&&i(x.last_text,["get","set","new","return","export","async"])){J.space_before_token=true}else{if(Y==="TK_RESERVED"&&x.last_text==="default"&&E==="export"){J.space_before_token=true}else{I()}}}else{if(Y==="TK_OPERATOR"||x.last_text==="="){J.space_before_token=true}else{if(!x.multiline_frame&&(L(x.mode)||U(x.mode))){}else{I()}}}}if(Y==="TK_COMMA"||Y==="TK_START_EXPR"||Y==="TK_EQUALS"||Y==="TK_OPERATOR"){if(!Q()){u()}}if(s.type==="TK_RESERVED"&&i(s.text,["function","get","set"])){P();x.last_word=s.text;return}V="NONE";if(Y==="TK_END_BLOCK"){if(!(s.type==="TK_RESERVED"&&i(s.text,["else","catch","finally"]))){V="NEWLINE"}else{if(y.brace_style==="expand"||y.brace_style==="end-expand"||(y.brace_style==="none"&&s.wanted_newline)){V="NEWLINE"}else{V="SPACE";J.space_before_token=true}}}else{if(Y==="TK_SEMICOLON"&&x.mode===f.BlockStatement){V="NEWLINE"}else{if(Y==="TK_SEMICOLON"&&L(x.mode)){V="SPACE"}else{if(Y==="TK_STRING"){V="NEWLINE"}else{if(Y==="TK_RESERVED"||Y==="TK_WORD"||(x.last_text==="*"&&E==="function")){V="SPACE"}else{if(Y==="TK_START_BLOCK"){V="NEWLINE"}else{if(Y==="TK_END_EXPR"){J.space_before_token=true;V="NEWLINE"}}}}}}}if(s.type==="TK_RESERVED"&&i(s.text,O.line_starters)&&x.last_text!==")"){if(x.last_text==="else"||x.last_text==="export"){V="SPACE"}else{V="NEWLINE"}}if(s.type==="TK_RESERVED"&&i(s.text,["else","catch","finally"])){if(Y!=="TK_END_BLOCK"||y.brace_style==="expand"||y.brace_style==="end-expand"||(y.brace_style==="none"&&s.wanted_newline)){I()}else{J.trim(true);var am=J.current_line;if(am.last()!=="}"){I()}J.space_before_token=true}}else{if(V==="NEWLINE"){if(Y==="TK_RESERVED"&&T(x.last_text)){J.space_before_token=true}else{if(Y!=="TK_END_EXPR"){if((Y!=="TK_START_EXPR"||!(s.type==="TK_RESERVED"&&i(s.text,["var","let","const"])))&&x.last_text!==":"){if(s.type==="TK_RESERVED"&&s.text==="if"&&x.last_text==="else"){J.space_before_token=true}else{I()}}}else{if(s.type==="TK_RESERVED"&&i(s.text,O.line_starters)&&x.last_text!==")"){I()}}}}else{if(x.multiline_frame&&U(x.mode)&&x.last_text===","&&E==="}"){I()}else{if(V==="SPACE"){J.space_before_token=true}}}}P();x.last_word=s.text;if(s.type==="TK_RESERVED"&&s.text==="do"){x.do_block=true}if(s.type==="TK_RESERVED"&&s.text==="if"){x.if_block=true}}function M(){if(K()){J.space_before_token=false}while(x.mode===f.Statement&&!x.if_block&&!x.do_block){q()}P()}function z(){if(K()){J.space_before_token=true}else{if(Y==="TK_RESERVED"||Y==="TK_WORD"){J.space_before_token=true}else{if(Y==="TK_COMMA"||Y==="TK_START_EXPR"||Y==="TK_EQUALS"||Y==="TK_OPERATOR"){if(!Q()){u()}}else{I()}}}P()}function S(){if(K()){}if(x.declaration_statement){x.declaration_assignment=true}J.space_before_token=true;P();J.space_before_token=true}function ad(){if(x.declaration_statement){if(L(x.parent.mode)){x.declaration_assignment=false}P();if(x.declaration_assignment){x.declaration_assignment=false;I(false,true)}else{J.space_before_token=true;if(y.comma_first){u()}}return}P();if(x.mode===f.ObjectLiteral||(x.mode===f.Statement&&x.parent.mode===f.ObjectLiteral)){if(x.mode===f.Statement){q()}I()}else{J.space_before_token=true;if(y.comma_first){u()}}}function ab(){if(K()){}if(Y==="TK_RESERVED"&&T(x.last_text)){J.space_before_token=true;P();return}if(s.text==="*"&&Y==="TK_DOT"){P();return}if(s.text===":"&&x.in_case){x.case_body=true;w();P();I();x.in_case=false;return}if(s.text==="::"){P();return}if(Y==="TK_OPERATOR"){u()}var an=true;var am=true;if(i(s.text,["--","++","!","~"])||(i(s.text,["-","+"])&&(i(Y,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||i(x.last_text,O.line_starters)||x.last_text===","))){an=false;am=false;if(s.wanted_newline&&(s.text==="--"||s.text==="++")){I(false,true)}if(x.last_text===";"&&L(x.mode)){an=true}if(Y==="TK_RESERVED"){an=true}else{if(Y==="TK_END_EXPR"){an=!(x.last_text==="]"&&(s.text==="--"||s.text==="++"))}else{if(Y==="TK_OPERATOR"){an=i(s.text,["--","-","++","+"])&&i(x.last_text,["--","-","++","+"]);if(i(s.text,["+","-"])&&i(x.last_text,["--","++"])){am=true}}}}if((x.mode===f.BlockStatement||x.mode===f.Statement)&&(x.last_text==="{"||x.last_text===";")){I()}}else{if(s.text===":"){if(x.ternary_depth===0){an=false}else{x.ternary_depth-=1}}else{if(s.text==="?"){x.ternary_depth+=1}else{if(s.text==="*"&&Y==="TK_RESERVED"&&x.last_text==="function"){an=false;am=false}}}}J.space_before_token=J.space_before_token||an;P();J.space_before_token=am}function ac(){if(J.raw){J.add_raw_token(s);if(s.directives&&s.directives.preserve==="end"){if(!y.test_output_raw){J.raw=false}}return}if(s.directives){I(false,true);P();if(s.directives.preserve==="start"){J.raw=true}I(false,true);return}if(!g.newline.test(s.text)&&!s.wanted_newline){J.space_before_token=true;P();J.space_before_token=true;return}var am=ai(s.text);var ao;var an=false;var ap=false;var aq=s.whitespace_before;var ar=aq.length;I(false,true);if(am.length>1){if(ak(am.slice(1),"*")){an=true}else{if(aa(am.slice(1),aq)){ap=true}}}P(am[0]);for(ao=1;ao<am.length;ao++){I(false,true);if(an){P(" "+l(am[ao]))}else{if(ap&&am[ao].length>ar){P(am[ao].substring(ar))}else{J.add_token(am[ao])}}}I(false,true)}function t(){if(s.wanted_newline){I(false,true)}else{J.trim(true)}J.space_before_token=true;P();I(false,true)}function ae(){if(K()){}if(Y==="TK_RESERVED"&&T(x.last_text)){J.space_before_token=true}else{u(x.last_text===")"&&y.break_chained_methods)}P()}function Z(){P();if(s.text[s.text.length-1]==="\n"){I()}}function af(){while(x.mode===f.Statement){q()}}}function b(n){var p=0;var q=-1;var o=[];var m=true;this.set_indent=function(r){p=n.baseIndentLength+r*n.indent_length;q=r};this.get_character_count=function(){return p};this.is_empty=function(){return m};this.last=function(){if(!this._empty){return o[o.length-1]}else{return null}};this.push=function(r){o.push(r);p+=r.length;m=false};this.pop=function(){var r=null;if(!m){r=o.pop();p-=r.length;m=o.length===0}return r};this.remove_indent=function(){if(q>0){q-=1;p-=n.indent_length}};this.trim=function(){while(this.last()===" "){var r=o.pop();p-=1}m=o.length===0};this.toString=function(){var r="";if(!this._empty){if(q>=0){r=n.indent_cache[q]}r+=o.join("")}return r}}function j(m,o){o=o||"";this.indent_cache=[o];this.baseIndentLength=o.length;this.indent_length=m.length;this.raw=false;var n=[];this.baseIndentString=o;this.indent_string=m;this.previous_line=null;this.current_line=null;this.space_before_token=false;this.add_outputline=function(){this.previous_line=this.current_line;this.current_line=new b(this);n.push(this.current_line)};this.add_outputline();this.get_line_number=function(){return n.length};this.add_new_line=function(p){if(this.get_line_number()===1&&this.just_added_newline()){return false}if(p||!this.just_added_newline()){if(!this.raw){this.add_outputline()}return true}return false};this.get_code=function(){var p=n.join("\n").replace(/[\r\n\t ]+$/,"");return p};this.set_indent=function(p){if(n.length>1){while(p>=this.indent_cache.length){this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string)}this.current_line.set_indent(p);return true}this.current_line.set_indent(0);return false};this.add_raw_token=function(q){for(var p=0;p<q.newlines;p++){this.add_outputline()}this.current_line.push(q.whitespace_before);this.current_line.push(q.text);this.space_before_token=false};this.add_token=function(p){this.add_space_before_token();this.current_line.push(p)};this.add_space_before_token=function(){if(this.space_before_token&&!this.just_added_newline()){this.current_line.push(" ")}this.space_before_token=false};this.remove_redundant_indentation=function(s){if(s.multiline_frame||s.mode===f.ForInitializer||s.mode===f.Conditional){return}var q=s.start_line_index;var p;var r=n.length;while(q<r){n[q].remove_indent();q++}};this.trim=function(p){p=(p===undefined)?false:p;this.current_line.trim(m,o);while(p&&n.length>1&&this.current_line.is_empty()){n.pop();this.current_line=n[n.length-1];this.current_line.trim()}this.previous_line=n.length>1?n[n.length-2]:null};this.just_added_newline=function(){return this.current_line.is_empty()};this.just_added_blankline=function(){if(this.just_added_newline()){if(n.length===1){return true}var p=n[n.length-2];return p.is_empty()}return false}}var a=function(o,r,p,m,q,n){this.type=o;this.text=r;this.comments_before=[];this.newlines=p||0;this.wanted_newline=p>0;this.whitespace_before=m||"";this.parent=null;this.directives=null};function k(t,u,s){var G="\n\r\t ".split("");var x=/[0-9]/;var r=/[0123456789abcdefABCDEF]/;var A=("+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: => <%= <% %> <?= <? ?>").split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var H=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]);var q=/([\s\S]*?)((?:\*\/)|$)/g;var m=/([^\n\r\u2028\u2029]*)/g;var I=/\/\* beautify( \w+[:]\w+)+ \*\//g;var E=/ (\w+)[:](\w+)/g;var o=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g;var n=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;var D,z,F,v,y;var C;this.tokenize=function(){C=t.length;y=0;F=false;v=[];var K,M;var L;var J=null;var N=[];var O=[];while(!(M&&M.type==="TK_EOF")){L=w();K=new a(L[1],L[0],D,z);while(K.type==="TK_COMMENT"||K.type==="TK_BLOCK_COMMENT"||K.type==="TK_UNKNOWN"){if(K.type==="TK_BLOCK_COMMENT"){K.directives=L[2]}O.push(K);L=w();K=new a(L[1],L[0],D,z)}if(O.length){K.comments_before=O;O=[]}if(K.type==="TK_START_BLOCK"||K.type==="TK_START_EXPR"){K.parent=M;N.push(J);J=K}else{if((K.type==="TK_END_BLOCK"||K.type==="TK_END_EXPR")&&(J&&((K.text==="]"&&J.text==="[")||(K.text===")"&&J.text==="(")||(K.text==="}"&&J.text==="{")))){K.parent=J.parent;J=N.pop()}}v.push(K);M=K}return v};function B(L){if(!L.match(I)){return null}var K={};E.lastIndex=0;var J=E.exec(L);while(J){K[J[1]]=J[2];J=E.exec(L)}return K}function w(){var Z,Y;var ai=[];D=0;z="";if(y>=C){return["","TK_EOF"]}var X;if(v.length){X=v[v.length-1]}else{X=new a("TK_START_BLOCK","{")}var ae=t.charAt(y);y+=1;while(i(ae,G)){if(g.newline.test(ae)){if(!(ae==="\n"&&t.charAt(y-2)==="\r")){D+=1;ai=[]}}else{ai.push(ae)}if(y>=C){return["","TK_EOF"]}ae=t.charAt(y);y+=1}if(ai.length){z=ai.join("")}if(x.test(ae)){var Q=true;var P=true;var ag=x;if(ae==="0"&&y<C&&/[Xx]/.test(t.charAt(y))){Q=false;P=false;ae+=t.charAt(y);y+=1;ag=r}else{ae="";y-=1}while(y<C&&ag.test(t.charAt(y))){ae+=t.charAt(y);y+=1;if(Q&&y<C&&t.charAt(y)==="."){ae+=t.charAt(y);y+=1;Q=false}if(P&&y<C&&/[Ee]/.test(t.charAt(y))){ae+=t.charAt(y);y+=1;if(y<C&&/[+-]/.test(t.charAt(y))){ae+=t.charAt(y);y+=1}P=false;Q=false}}return[ae,"TK_WORD"]}if(g.isIdentifierStart(t.charCodeAt(y-1))){if(y<C){while(g.isIdentifierChar(t.charCodeAt(y))){ae+=t.charAt(y);y+=1;if(y===C){break}}}if(!(X.type==="TK_DOT"||(X.type==="TK_RESERVED"&&i(X.text,["set","get"])))&&i(ae,H)){if(ae==="in"){return[ae,"TK_OPERATOR"]}return[ae,"TK_RESERVED"]}return[ae,"TK_WORD"]}if(ae==="("||ae==="["){return[ae,"TK_START_EXPR"]}if(ae===")"||ae==="]"){return[ae,"TK_END_EXPR"]}if(ae==="{"){return[ae,"TK_START_BLOCK"]}if(ae==="}"){return[ae,"TK_END_BLOCK"]}if(ae===";"){return[ae,"TK_SEMICOLON"]}if(ae==="/"){var K="";if(t.charAt(y)==="*"){y+=1;q.lastIndex=y;var V=q.exec(t);K="/*"+V[0];y+=V[0].length;var R=B(K);if(R&&R.ignore==="start"){o.lastIndex=y;V=o.exec(t);K+=V[0];y+=V[0].length}K=K.replace(g.lineBreak,"\n");return[K,"TK_BLOCK_COMMENT",R]}if(t.charAt(y)==="/"){y+=1;m.lastIndex=y;var V=m.exec(t);K="//"+V[0];y+=V[0].length;return[K,"TK_COMMENT"]}}if(ae==="`"||ae==="'"||ae==='"'||((ae==="/")||(u.e4x&&ae==="<"&&t.slice(y-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/)))&&((X.type==="TK_RESERVED"&&i(X.text,["return","case","throw","else","do","typeof","yield"]))||(X.type==="TK_END_EXPR"&&X.text===")"&&X.parent&&X.parent.type==="TK_RESERVED"&&i(X.parent.text,["if","while","for"]))||(i(X.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"])))){var W=ae,af=false,M=false;Y=ae;if(W==="/"){var N=false;while(y<C&&((af||N||t.charAt(y)!==W)&&!g.newline.test(t.charAt(y)))){Y+=t.charAt(y);if(!af){af=t.charAt(y)==="\\";if(t.charAt(y)==="["){N=true}else{if(t.charAt(y)==="]"){N=false}}}else{af=false}y+=1}}else{if(u.e4x&&W==="<"){var ad=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g;var L=t.slice(y-1);var S=ad.exec(L);if(S&&S.index===0){var ab=S[2];var ah=0;while(S){var ac=!!S[1];var O=S[2];var J=(!!S[S.length-1])||(O.slice(0,8)==="![CDATA[");if(O===ab&&!J){if(ac){--ah}else{++ah}}if(ah<=0){break}S=ad.exec(L)}var aa=S?S.index+S[0].length:L.length;L=L.slice(0,aa);y+=aa-1;L=L.replace(g.lineBreak,"\n");return[L,"TK_STRING"]}}else{while(y<C&&(af||(t.charAt(y)!==W&&(W==="`"||!g.newline.test(t.charAt(y)))))){if((af||W==="`")&&g.newline.test(t.charAt(y))){if(t.charAt(y)==="\r"&&t.charAt(y+1)==="\n"){y+=1}Y+="\n"}else{Y+=t.charAt(y)}if(af){if(t.charAt(y)==="x"||t.charAt(y)==="u"){M=true}af=false}else{af=t.charAt(y)==="\\"}y+=1}}}if(M&&u.unescape_strings){Y=p(Y)}if(y<C&&t.charAt(y)===W){Y+=W;y+=1;if(W==="/"){while(y<C&&g.isIdentifierStart(t.charCodeAt(y))){Y+=t.charAt(y);y+=1}}}return[Y,"TK_STRING"]}if(ae==="#"){if(v.length===0&&t.charAt(y)==="!"){Y=ae;while(y<C&&ae!=="\n"){ae=t.charAt(y);Y+=ae;y+=1}return[d(Y)+"\n","TK_UNKNOWN"]}var U="#";if(y<C&&x.test(t.charAt(y))){do{ae=t.charAt(y);U+=ae;y+=1}while(y<C&&ae!=="#"&&ae!=="=");if(ae==="#"){}else{if(t.charAt(y)==="["&&t.charAt(y+1)==="]"){U+="[]";y+=2}else{if(t.charAt(y)==="{"&&t.charAt(y+1)==="}"){U+="{}";y+=2}}}return[U,"TK_WORD"]}}if(ae==="<"&&(t.charAt(y)==="?"||t.charAt(y)==="%")){n.lastIndex=y-1;var T=n.exec(t);if(T){ae=T[0];y+=ae.length-1;ae=ae.replace(g.lineBreak,"\n");return[ae,"TK_STRING"]}}if(ae==="<"&&t.substring(y-1,y+3)==="<!--"){y+=3;ae="<!--";while(!g.newline.test(t.charAt(y))&&y<C){ae+=t.charAt(y);y++}F=true;return[ae,"TK_COMMENT"]}if(ae==="-"&&F&&t.substring(y-1,y+2)==="-->"){F=false;y+=2;return["-->","TK_COMMENT"]}if(ae==="."){return[ae,"TK_DOT"]}if(i(ae,A)){while(y<C&&i(ae+t.charAt(y),A)){ae+=t.charAt(y);y+=1;if(y>=C){break}}if(ae===","){return[ae,"TK_COMMA"]}else{if(ae==="="){return[ae,"TK_EQUALS"]}else{return[ae,"TK_OPERATOR"]}}}return[ae,"TK_UNKNOWN"]}function p(M){var J=false,K="",P=0,L="",N=0,O;while(J||P<M.length){O=M.charAt(P);P++;if(J){J=false;if(O==="x"){L=M.substr(P,2);P+=2}else{if(O==="u"){L=M.substr(P,4);P+=4}else{K+="\\"+O;continue}}if(!L.match(/^[0123456789abcdefABCDEF]+$/)){return M}N=parseInt(L,16);if(N>=0&&N<32){if(O==="x"){K+="\\x"+L}else{K+="\\u"+L}continue}else{if(N===34||N===39||N===92){K+="\\"+String.fromCharCode(N)}else{if(O==="x"&&N>126&&N<=255){return M}else{K+=String.fromCharCode(N)}}}}else{if(O==="\\"){J=true}else{K+=O}}}return K}}if(typeof define==="function"&&define.amd){define([],function(){return{js_beautify:c}})}else{if(typeof exports!=="undefined"){exports.js_beautify=c}else{if(typeof window!=="undefined"){window.js_beautify=c}else{if(typeof global!=="undefined"){global.js_beautify=c}}}}}());(function(){function a(g){return g.replace(/^\s+|\s+$/g,"")}function f(g){return g.replace(/^\s+/g,"")}function d(g){return g.replace(/\s+$/g,"")}function c(H,l,z,n){var O,x,D,A,E,r,L,G,m,y,I,M,N,h,p;l=l||{};if((l.wrap_line_length===undefined||parseInt(l.wrap_line_length,10)===0)&&(l.max_char!==undefined&&parseInt(l.max_char,10)!==0)){l.wrap_line_length=l.max_char}x=(l.indent_inner_html===undefined)?false:l.indent_inner_html;D=(l.indent_size===undefined)?4:parseInt(l.indent_size,10);A=(l.indent_char===undefined)?" ":l.indent_char;r=(l.brace_style===undefined)?"collapse":l.brace_style;E=parseInt(l.wrap_line_length,10)===0?32786:parseInt(l.wrap_line_length||250,10);L=l.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"];G=(l.preserve_newlines===undefined)?true:l.preserve_newlines;m=G?(isNaN(parseInt(l.max_preserve_newlines,10))?32786:parseInt(l.max_preserve_newlines,10)):0;y=(l.indent_handlebars===undefined)?false:l.indent_handlebars;I=(l.wrap_attributes===undefined)?"auto":l.wrap_attributes;M=(l.wrap_attributes_indent_size===undefined)?D:parseInt(l.wrap_attributes_indent_size,10)||D;N=(l.end_with_newline===undefined)?false:l.end_with_newline;h=(typeof l.extra_liners=="object")&&l.extra_liners?l.extra_liners.concat():(typeof l.extra_liners==="string")?l.extra_liners.split(","):"head,body,/html".split(",");p=l.eol?l.eol:"\n";if(l.indent_with_tabs){A="\t";D=1}p=p.replace(/\\r/,"\r").replace(/\\n/,"\n");function k(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.tag_type="";this.token_text=this.last_token=this.last_text=this.token_type="";this.newlines=0;this.indent_content=x;this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:h,in_array:function(Q,t){for(var P=0;P<t.length;P++){if(Q===t[P]){return true}}return false}};this.is_whitespace=function(t){for(var P=0;P<t.length;t++){if(!this.Utils.in_array(t.charAt(P),this.Utils.whitespace)){return false}}return true};this.traverse_whitespace=function(){var t="";t=this.input.charAt(this.pos);if(this.Utils.in_array(t,this.Utils.whitespace)){this.newlines=0;while(this.Utils.in_array(t,this.Utils.whitespace)){if(G&&t==="\n"&&this.newlines<=m){this.newlines+=1}this.pos++;t=this.input.charAt(this.pos)}return true}return false};this.space_or_wrap=function(t){if(this.line_char_count>=this.wrap_line_length){this.print_newline(false,t);this.print_indentation(t)}else{this.line_char_count++;t.push(" ")}};this.get_content=function(){var t="",Q=[],R=false;while(this.input.charAt(this.pos)!=="<"){if(this.pos>=this.input.length){return Q.length?Q.join(""):["","TK_EOF"]}if(this.traverse_whitespace()){this.space_or_wrap(Q);continue}if(y){var P=this.input.substr(this.pos,3);if(P==="{{#"||P==="{{/"){break}else{if(P==="{{!"){return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"]}else{if(this.input.substr(this.pos,2)==="{{"){if(this.get_tag(true)==="{{else}}"){break}}}}}t=this.input.charAt(this.pos);this.pos++;this.line_char_count++;Q.push(t)}return Q.length?Q.join(""):""};this.get_contents_to=function(Q){if(this.pos===this.input.length){return["","TK_EOF"]}var t="";var R="";var S=new RegExp("</"+Q+"\\s*>","igm");S.lastIndex=this.pos;var P=S.exec(this.input);var T=P?P.index:this.input.length;if(this.pos<T){R=this.input.substring(this.pos,T);this.pos=T}return R};this.record_tag=function(t){if(this.tags[t+"count"]){this.tags[t+"count"]++;this.tags[t+this.tags[t+"count"]]=this.indent_level}else{this.tags[t+"count"]=1;this.tags[t+this.tags[t+"count"]]=this.indent_level}this.tags[t+this.tags[t+"count"]+"parent"]=this.tags.parent;this.tags.parent=t+this.tags[t+"count"]};this.retrieve_tag=function(t){if(this.tags[t+"count"]){var P=this.tags.parent;while(P){if(t+this.tags[t+"count"]===P){break}P=this.tags[P+"parent"]}if(P){this.indent_level=this.tags[t+this.tags[t+"count"]];this.tags.parent=this.tags[P+"parent"]}delete this.tags[t+this.tags[t+"count"]+"parent"];delete this.tags[t+this.tags[t+"count"]];if(this.tags[t+"count"]===1){delete this.tags[t+"count"]}else{this.tags[t+"count"]--}}};this.indent_to_tag=function(t){if(!this.tags[t+"count"]){return}var P=this.tags.parent;while(P){if(t+this.tags[t+"count"]===P){break}P=this.tags[P+"parent"]}if(P){this.indent_level=this.tags[t+this.tags[t+"count"]]}};this.get_tag=function(ad){var X="",aa=[],Y="",P=false,R=true,ac,V,U,Q=this.pos,t=this.line_char_count;ad=ad!==undefined?ad:false;do{if(this.pos>=this.input.length){if(ad){this.pos=Q;this.line_char_count=t}return aa.length?aa.join(""):["","TK_EOF"]}X=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(X,this.Utils.whitespace)){P=true;continue}if(X==="'"||X==='"'){X+=this.get_unformatted(X);P=true}if(X==="="){P=false}if(aa.length&&aa[aa.length-1]!=="="&&X!==">"&&P){this.space_or_wrap(aa);P=false;if(!R&&I==="force"&&X!=="/"){this.print_newline(true,aa);this.print_indentation(aa);for(var Z=0;Z<M;Z++){aa.push(A)}}for(var W=0;W<aa.length;W++){if(aa[W]===" "){R=false;break}}}if(y&&U==="<"){if((X+this.input.charAt(this.pos))==="{{"){X+=this.get_unformatted("}}");if(aa.length&&aa[aa.length-1]!==" "&&aa[aa.length-1]!=="<"){X=" "+X}P=true}}if(X==="<"&&!U){ac=this.pos-1;U="<"}if(y&&!U){if(aa.length>=2&&aa[aa.length-1]==="{"&&aa[aa.length-2]==="{"){if(X==="#"||X==="/"||X==="!"){ac=this.pos-3}else{ac=this.pos-2}U="{"}}this.line_char_count++;aa.push(X);if(aa[1]&&(aa[1]==="!"||aa[1]==="?"||aa[1]==="%")){aa=[this.get_comment(ac)];break}if(y&&aa[1]&&aa[1]==="{"&&aa[2]&&aa[2]==="!"){aa=[this.get_comment(ac)];break}if(y&&U==="{"&&aa.length>2&&aa[aa.length-2]==="}"&&aa[aa.length-1]==="}"){break}}while(X!==">");var ae=aa.join("");var T;var S;if(ae.indexOf(" ")!==-1){T=ae.indexOf(" ")}else{if(ae.charAt(0)==="{"){T=ae.indexOf("}")}else{T=ae.indexOf(">")}}if(ae.charAt(0)==="<"||!y){S=1}else{S=ae.charAt(2)==="#"?3:2}var ab=ae.substring(S,T).toLowerCase();if(ae.charAt(ae.length-2)==="/"||this.Utils.in_array(ab,this.Utils.single_token)){if(!ad){this.tag_type="SINGLE"}}else{if(y&&ae.charAt(0)==="{"&&ab==="else"){if(!ad){this.indent_to_tag("if");this.tag_type="HANDLEBARS_ELSE";this.indent_content=true;this.traverse_whitespace()}}else{if(this.is_unformatted(ab,L)){Y=this.get_unformatted("</"+ab+">",ae);aa.push(Y);V=this.pos-1;this.tag_type="SINGLE"}else{if(ab==="script"&&(ae.search("type")===-1||(ae.search("type")>-1&&ae.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1))){if(!ad){this.record_tag(ab);this.tag_type="SCRIPT"}}else{if(ab==="style"&&(ae.search("type")===-1||(ae.search("type")>-1&&ae.search("text/css")>-1))){if(!ad){this.record_tag(ab);this.tag_type="STYLE"}}else{if(ab.charAt(0)==="!"){if(!ad){this.tag_type="SINGLE";this.traverse_whitespace()}}else{if(!ad){if(ab.charAt(0)==="/"){this.retrieve_tag(ab.substring(1));this.tag_type="END"}else{this.record_tag(ab);if(ab.toLowerCase()!=="html"){this.indent_content=true}this.tag_type="START"}if(this.traverse_whitespace()){this.space_or_wrap(aa)}if(this.Utils.in_array(ab,this.Utils.extra_liners)){this.print_newline(false,this.output);if(this.output.length&&this.output[this.output.length-2]!=="\n"){this.print_newline(true,this.output)}}}}}}}}}if(ad){this.pos=Q;this.line_char_count=t}return aa.join("")};this.get_comment=function(P){var R="",Q=">",t=false;this.pos=P;input_char=this.input.charAt(this.pos);this.pos++;while(this.pos<=this.input.length){R+=input_char;if(R.charAt(R.length-1)===Q.charAt(Q.length-1)&&R.indexOf(Q)!==-1){break}if(!t&&R.length<10){if(R.indexOf("<![if")===0){Q="<![endif]>";t=true}else{if(R.indexOf("<![cdata[")===0){Q="]]>";t=true}else{if(R.indexOf("<![")===0){Q="]>";t=true}else{if(R.indexOf("<!--")===0){Q="-->";t=true}else{if(R.indexOf("{{!")===0){Q="}}";t=true}else{if(R.indexOf("<?")===0){Q="?>";t=true}else{if(R.indexOf("<%")===0){Q="%>";t=true}}}}}}}}input_char=this.input.charAt(this.pos);this.pos++}return R};this.get_unformatted=function(P,Q){if(Q&&Q.toLowerCase().indexOf(P)!==-1){return""}var t="";var R="";var T=0;var S=true;do{if(this.pos>=this.input.length){return R}t=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(t,this.Utils.whitespace)){if(!S){this.line_char_count--;continue}if(t==="\n"||t==="\r"){R+="\n";this.line_char_count=0;continue}}R+=t;this.line_char_count++;S=true;if(y&&t==="{"&&R.length&&R.charAt(R.length-2)==="{"){R+=this.get_unformatted("}}");T=R.length}}while(R.toLowerCase().indexOf(P,T)===-1);return R};this.get_token=function(){var t;if(this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"){var P=this.last_token.substr(7);t=this.get_contents_to(P);if(typeof t!=="string"){return t}return[t,"TK_"+P]}if(this.current_mode==="CONTENT"){t=this.get_content();if(typeof t!=="string"){return t}else{return[t,"TK_CONTENT"]}}if(this.current_mode==="TAG"){t=this.get_tag();if(typeof t!=="string"){return t}else{var Q="TK_TAG_"+this.tag_type;return[t,Q]}}};this.get_full_indent=function(t){t=this.indent_level+t||0;if(t<1){return""}return Array(t+1).join(this.indent_string)};this.is_unformatted=function(Q,P){if(!this.Utils.in_array(Q,P)){return false}if(Q.toLowerCase()!=="a"||!this.Utils.in_array("a",P)){return true}var R=this.get_tag(true);var t=(R||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);if(!t||this.Utils.in_array(t,P)){return true}else{return false}};this.printer=function(R,Q,t,T,S){this.input=R||"";this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n");this.output=[];this.indent_character=Q;this.indent_string="";this.indent_size=t;this.brace_style=S;this.indent_level=0;this.wrap_line_length=T;this.line_char_count=0;for(var P=0;P<this.indent_size;P++){this.indent_string+=this.indent_character}this.print_newline=function(V,U){this.line_char_count=0;if(!U||!U.length){return}if(V||(U[U.length-1]!=="\n")){if((U[U.length-1]!=="\n")){U[U.length-1]=d(U[U.length-1])}U.push("\n")}};this.print_indentation=function(U){for(var V=0;V<this.indent_level;V++){U.push(this.indent_string);this.line_char_count+=this.indent_string.length}};this.print_token=function(U){if(this.is_whitespace(U)&&!this.output.length){return}if(U||U!==""){if(this.output.length&&this.output[this.output.length-1]==="\n"){this.print_indentation(this.output);U=f(U)}}this.print_token_raw(U)};this.print_token_raw=function(U){if(this.newlines>0){U=d(U)}if(U&&U!==""){if(U.length>1&&U.charAt(U.length-1)==="\n"){this.output.push(U.slice(0,-1));this.print_newline(false,this.output)}else{this.output.push(U)}}for(var V=0;V<this.newlines;V++){this.print_newline(V>0,this.output)}this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){if(this.indent_level>0){this.indent_level--}}};return this}O=new k();O.printer(H,A,D,E,r);while(true){var w=O.get_token();O.token_text=w[0];O.token_type=w[1];if(O.token_type==="TK_EOF"){break}switch(O.token_type){case"TK_TAG_START":O.print_newline(false,O.output);O.print_token(O.token_text);if(O.indent_content){O.indent();O.indent_content=false}O.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":O.print_newline(false,O.output);O.print_token(O.token_text);O.current_mode="CONTENT";break;case"TK_TAG_END":if(O.last_token==="TK_CONTENT"&&O.last_text===""){var K=O.token_text.match(/\w+/)[0];var v=null;if(O.output.length){v=O.output[O.output.length-1].match(/(?:<|{{#)\s*(\w+)/)}if(v===null||(v[1]!==K&&!O.Utils.in_array(v[1],L))){O.print_newline(false,O.output)}}O.print_token(O.token_text);O.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var j=O.token_text.match(/^\s*<([a-z-]+)/i);if(!j||!O.Utils.in_array(j[1],L)){O.print_newline(false,O.output)}O.print_token(O.token_text);O.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":O.print_token(O.token_text);if(O.indent_content){O.indent();O.indent_content=false}O.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":O.print_token(O.token_text);O.current_mode="TAG";break;case"TK_CONTENT":O.print_token(O.token_text);O.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(O.token_text!==""){O.print_newline(false,O.output);var u=O.token_text,F,s=1;if(O.token_type==="TK_SCRIPT"){F=typeof z==="function"&&z}else{if(O.token_type==="TK_STYLE"){F=typeof n==="function"&&n}}if(l.indent_scripts==="keep"){s=0}else{if(l.indent_scripts==="separate"){s=-O.indent_level}}var i=O.get_full_indent(s);if(F){var q=function(){this.eol="\n"};q.prototype=l;var g=new q();u=F(u.replace(/^\s*/,i),g)}else{var o=u.match(/^\s*/)[0];var C=o.match(/[^\n\r]*$/)[0].split(O.indent_string).length-1;var J=O.get_full_indent(s-C);u=u.replace(/^\s*/,i).replace(/\r\n|\r|\n/g,"\n"+J).replace(/\s+$/,"")}if(u){O.print_token_raw(u);O.print_newline(true,O.output)}}O.current_mode="TAG";break;default:if(O.token_text!==""){O.print_token(O.token_text)}break}O.last_token=O.token_type;O.last_text=O.token_text}var B=O.output.join("").replace(/[\r\n\t ]+$/,"");if(N){B+="\n"}if(p!="\n"){B=B.replace(/[\n]/g,p)}return B}if(typeof define==="function"&&define.amd){define(["require","./beautify","./beautify-css"],function(h){var g=h("./beautify");var i=h("./beautify-css");return{html_beautify:function(k,j){return c(k,j,g.js_beautify,i.css_beautify)}}})}else{if(typeof exports!=="undefined"){var b=require("./beautify.js");var e=require("./beautify-css.js");exports.html_beautify=function(h,g){return c(h,g,b.js_beautify,e.css_beautify)}}else{if(typeof window!=="undefined"){window.html_beautify=function(h,g){return c(h,g,window.js_beautify,window.css_beautify)}}else{if(typeof global!=="undefined"){global.html_beautify=function(h,g){return c(h,g,global.js_beautify,global.css_beautify)}}}}}}());